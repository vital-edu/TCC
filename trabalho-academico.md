# Introdução

A era digital tem transformado importantes aspectos da nossa sociedade. A computação em conjunto com a *internet* tem melhorado progressivamente a sociedade, transformando sistemas físicos, burocráticos, e restritos por fronteiras geopolíticas em sistemas virtuais, que não se limitam a fronteiras físicas e que conseguem realizar processos complexos em milissegundos.

Em menos de cinquenta anos, a transformação digital tem trazido revoluções na forma como trocamos informações, nos comunicamos e realizamos tarefas cotidianas e dentre essas inúmeras transformações digitais, o comércio eletrônico tem se destacado pela seu crescimento e por sua participação cada vez maior na econômica. Segundo \apudonline[pp. 9]{emarketer}{webshoppers2019}
o comércio eletrônico teve um crescimento de 24% no mundo todo em 2018, movimentando 2,9 trilhões de dólares em vendas. Esse crescimento tem acontecido ano após ano, em escala global, e o que em seu primórdio se restringia apenas a industria do entretenimento, passou a embarcar setores de turismo e prestação de serviços, posteriormente o setor de bens duráveis e não-duráveis, e está finalmente começando a incluir o comércio de bens perecíveis.

Essa nova forma de consumir e oferecer produtos e serviços, barateia e facilita a vida de compradores e vendedores, permitindo inclusive que consumidores de um país tenham acesso a produtos de outros países. Porém, o comércio eletrônico, assim como o comércio tradicional, sofre de regulamentações e taxações que dificultam que o livre comércio ocorra, sendo um meio mais fácil de controle, principalmente por dificultar as vendas informais devido a opção de pagamento predominantemente ser o cartão de crédito ou outros meios eletrônicos facilmente controlados e fiscalizados por governos.

Em situações como essa, em que há uma alta insegurança econômica, e em que não há mais a confiança de que as liberdades individuais dos indivíduos sejam respeitadas, surge a preocupação de como garantir que trocas pacíficas e voluntárias entre indivíduos possam ocorrer mesmo com agentes centrais tentando controlá-las, impedi-las ou fiscalizá-las.

A interferência de agentes centrais na vida dos indivíduos é dito como um mal necessário para evitar males maiores, porém, como Juvenal, poeta romano do final do Século I e início do Século II escreveu em uma de suas sátiras "*Quis custodiet ipsos custodes?*" \cite{juvenal} (Quem irá vigiar os próprios vigilantes?).

Para resolver esse problema, o presente trabalho apresenta uma solução de plataforma de comércio eletrônico descentralizada, capaz de resistir ao poder coercitivo de estados, e de garantir que os indivíduos sejam livres para praticar o verdadeiro livre comércio, de forma pacífica, voluntária, mutualmente benéfica e que iniba o uso da força por terceiros. Somente assim, poder-se-á criar uma verdadeira economia de livre mercado, que ultrapassa fronteiras, gerações e jurisdições arbitrárias.

Portanto, esse trabalho apresenta o estudo de tecnologias descentralizadas capazes de prover um ambiente descentralizado de livre mercado e idealiza uma pĺataforma de comércio  eletrônico baseada em criptomoedas e que opera de forma distribuída.

## Objetivos

### Objetivo geral

O presente trabalho tem como objetivo descrever como tecnologias descentralizadas podem ser utilizadas para a criação de uma plataforma de comércio eletrônico que possa sobreviver livre de interferências de agentes centrais, tais como governos estatais ou qualquer outra instituição centralizadora de poder que por quaisquer motivos queira regular ou impedir o livre comércio voluntário e pacífico entre indivíduos.

### Objetivos específicos

Para alcançar o objetivo geral, os objetivos específicos abaixo foram definidos:

- Estudar o que caracteriza um livre mercado e sua importância nas relações sociais;
- Estudar como tecnologias descentralizadoras funcionam;
- Identificar características essenciais para que um comércio eletrônico descentralizado seja viável;
- Propor uma solução de comércio eletrônico baseado em tecnologias descentralizadas.

# Referencial Teórico

Este capítulo explica o que é um livre mercado e qual a sua importância para as relações sociais; o que são *blockchain*, criptomoedas e aplicações descentralizadas, como elas funcionam e como podem ser utilizadas.

## Livre Mercado

Para entender o que é o livre mercado é preciso entender a natureza humana e um pouco sobre o estudo da economia. Ludwig von Mises usa da praxeologia, o estudo das ações humanas, para construir os princípios que regem a economia \cite[pp. 11--12]{mises}. Mises define a ação humana como o uso dos meios para se realizar um fim \cite[pp. 13]{mises}. Porém, é importante ressaltar que os motivos das ações humanas não pertencem ao campo da praxeologia e sim ao campo da psicologia e psicanalise sendo do interesse da praxeologia apenas as consequências práticos das ações.

Para que haja a ação humana é preciso haver um descontentamento, uma inquietude em relação ao estado atual do indivíduo, caso contrário nada precisaria ser feito, já que se estaria em um estado de perfeição que jamais precisaria ser alterado.

A inquietude com o estado atual acarreta em um desejo por mudança, uma idealização de algo que possa ser feito para alterar o estado atual. Essa idealização, em outras palavras, nada mais é do que o pensamento, as ideias, o raciocínio, a cognição sendo utilizadas para construir um plano de ação.

Mas apenas a inquietude e o pensamento de mudança não seriam suficientes para gerar uma ação, afinal, para que se aja é necessário um terceiro ingrediente, a expectativa de que a ação traga um mínimo de alívio ou diminuição da inquietação do indíviduo. Apenas havendo esses três elementos, a ação humana se torna factível.

Embora a palavra ação possa ser entendida como uma atitude ativa é importante salientar que ela também pode ser uma atitude passiva, ou seja, a decisão de não agir. A ação passiva portanto ocorre quando o indíviduo, conscientemente e diante das informações que possui, decide que ao fazer nada obterá o resultado que lhe trará a maior satisfação dentre todos os resultados que ele considerou.

A partir da definição da ação humana entende-se que um indíviduo sempre buscará um estado de melhor satisfação ou menor inquietude, porém, isso não significa que suas ações se concretizarão da forma que foi esperada, já que pode haver informações desconhecidas ao indivíduo, fatores externos a seu controle, ou alterações significativas no ambiente que o faça avaliar as ações realizadas de forma diferente, o que pode lhe provocar arrependimento.

Caso não houvesse o desconhecido, ou a possibilidade de erro nas ações tomadas pelo índividuo, poderia-se concluir que não haveria escolhas a serem feitas, já que uma escolha implica em uma tomada de risco, em uma balanceamento entre vantagens e desvantagens.

Todas as coisas que estão casualmente conectadas com a satisfação das necessidades humanas são definidas como *coisa útil*, e quando essas coisas são utilizadas para satisfazerem as necessidades humanas as chamamos de *bens* \cite[pp. 52]{menger}. Segundo \citeauthoronline{menger} para uma coisa adquirir as características de um bem deve-se ser preenchido simultaneamente os seguintes pré-requisitos:

1. haver uma necessidade humana;
2. haver propriedades que tornem a coisa capaz de ser empenhada em uma conexão causal com a satisfação dessa necessidade;
3. haver o conhecimento humano dessa causalidade;
4. haver controle suficiente sobre a coisa para usa-la para a satisfação dessa necessidade.

Os bens que podem ser utilizados para satisfazer diretamente as necessidades humanas, como por exemplo uma pizza pronta para ser devorada, são classificados de *bem de primeira ordem* ou *bens de consumo*, já os bens que apenas servirão para consumo em algum ponto do futuro são classificados como *bens de ordem superior*, *fatores de produção* ou *bens de produção* \cite[pp. 8]{rothbard}.

Pelo fato de os bens de consumo serem escassos (se não o fossem, não seriam objetos da ação humana), é necessário que o indivíduo rearranje os elementos disponíveis em seu ambiente para produzir os bens de consumo que deseja. Esse processo de utilização de meios indiretos em cooperação com fatores de produção para gerar um bem de consumo que alcance o fim desejado pelo indíviduo é definido como *produção* \cite[pp. 9]{rothbard}.

Todo o processo de produção necessita de tempo (um bem escasso) e fatores de produção que podem ser divididos em duas categorias

1. *fatores de produção originais*: bens prontamente disponíveis na natureza;
   - *trabalho*: o gasto de energia humana;
   - *terra*: elementos providos pela natureza.
2. *fatores de produção produzidos* ou *capital*.

Ao unir esses fatores de produção é possível produzir bens de maior ordem, ou seja, de maior valor agregado. E como
\citeauthoronline{bastiat} já havia observado, o homem, ao viver em sociedade, tem suas necessidades superadas pelas capacidades produtivas e suas necessidades elementares gradualmente dão lugar a desejos de ordem superior, levando sempre a um estado mais próximo da condição perfeita. Se isso não fosse verdade, ou seríamos criaturas retrógradas, ou seríamos irremediavelmente estáticos \cite[pp. 61--65]{bastiat}.

Pelo fato de toda ação humana ser uma tentativa de troca de um estado de menor satisfação para um estado de maior satisfação, fica evidente que as coisas são valorizadas como meios de acordo com a sua capacidade de contribuir para um fim desejado, sendo esse fim desejado, mais ou menos urgente de acordo com a preferência temporal do indíviduo.

Como o tempo é um bem escasso, sempre que um indivíduo escolher uma ação, ele necessariamente estará abrindo mão de qualquer outra ação que poderia ser executada naquele mesmo tempo. Devido a isso, pode-se concluir que cada unidade de um meio, seja ele direto ou indireto, e que é incorporado a ação humana é valorizado separadamente. \cite[pp. 21]{rothbard}.

Uma importante constatação é que o valor ou utilidade de um bem não pode ser medido, e portanto não pode ser aplicado as operações de soma, subtração, multiplicação ou divisão. Em outras palavras qualquer bem tem seu valor estimado de forma subjetiva por cada indivíduo.

As ações humanas usam meios escassos para satisfazerem a mais urgente das necessidades que ainda não foi satisfeita. \cite[pp. 24]{rothbard}. Como exemplo, se um indivíduo suscetivamente encontra um cavalo, e então um segundo e um terceiro, mesmo que os cavalos sejam idênticos e intercambiáveis entre si, o primeiro será utilizado para satisfazer a mais urgente das necessidades, o segundo será utilizado para a mais urgente das necessidades remanescentes, e assim suscetivamente.

Assim, o primeiro cavalo terá um valor maior que o segundo, que terá um valor maior que o terceiro. Ou seja, para todas as ações humanas, conforme a quantidade de suprimento de um mesmo bem aumenta, a utilidade (ou valor) de cada unidade adicionada diminui.

Por mais que seja impossível dizer o quão mais valorosa uma unidade de um mesmo bem é perante outra unidade do mesmo bem, ainda assim há uma relação ordinal entre cada unidade, o que pode ser ilustrado em um diagrama de escala de valores (fig \ref{fig:value-scale-diagram}), em que o eixo X representa um item de um mesmo bem, e o eixo Y mostra a ordem de importância de um fim ao qual esse bem é empregado.

Quando analisamos o estoque (definido com a quantidade de um mesmo bem quando um item pode ser intercambiável com outro item do mesmo bem) de um bem X com o estoque de um bem Y, podemos novamente criar uma escala de valores (fig. \ref{fig:value-scale-rank}), sendo que a regra se mantem: a necessidade mais urgente será satisfeita com determinada unidade de um bem, e suscetivamente as necessidade mais urgente remanescentes serão satisfeitas de acordo com as unidades recentes de cada bem, conforme eles satisfaçam essa necessidade.

\begin{figure}[h!]
  \centering
  \caption{\label{fig:value-scale-diagrams}Diagramas de escala de valores.}
  \begin{subfigure}[b]{0.4\linewidth}
    \caption{\label{fig:value-scale-diagram}Diagrama de escala de valores.}
    \includegraphics[height=\linewidth]{imagens/value-scale-diagram.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.4\linewidth}
    \centering
    \caption{\label{fig:value-scale-rank}Escala de Valor aplicada a estoques dos bens X e Y.}
    \includegraphics[height=\linewidth]{imagens/value-scale-rank.png}
  \end{subfigure}
  \legend{Fonte: \citeauthoronline{rothbard} \cite[pp. 26 e 32]{rothbard}.}
\end{figure}

Em uma escala de valores, a unidade de bem que está na última posição da escala é denominada *unidade marginal*, e o fim a qual essa unidade é empenhada denomina-se de *utilidade da unidade marginal*. Em termos gerais, quanto maior for o suprimento de um bem, menor será a utilidade marginal e em contrapartida, quanto menor for o suprimento de um bem, maior será a utilidade marginal. Esse fato praxeológico é conhecido como *lei de utilidade marginal*.

A escala de valores pode ser aplicada a quantos bens forem necessários, sendo o item em última posição o bem a qual o usuário irá abrir mão primeiro caso seja necessário. Porém é importante salientar que essa escala não é estática e representa apenas uma fotografia da preferência temporal de um indivíduo sobre determinadas condições.

Assim que as condições, as necessidades, os desejos, ou a percepção do indivíduo forem alterados, a escala também poderá será alterada. E é a partir desse entendimento que passamos a compreender como um indivíduo decide o que irá trocar em uma transação comercial.

E observando a lei da utilidade marginal chegamos a mesma conclusão que \citeauthoronline{condillac} \cite[pp. 85]{condillac} que disse que é falsa a afirmação de que em uma transação comercial um ator troca um bem por outro de igual valor, pelo contrário, cada um dos envolvidos na transação comercial troca um bem de menor valor por outro bem de maior valor. Se os bens possuíssem o mesmo valor, não haveria necessidade de realizar a troca, e uma troca de um bem de maior valor por um de menor valor é injustificável quando feita de forma voluntária.

Mesmo quando um bem é dado gratuitamente ocorre uma troca de valores em que o individuo que abre mão daquele bem se sente em uma situação de maior satisfação do que se tivesse mantido o bem para si. Isso novamente explicita o caráter subjetivo e individual do valor de cada bem. Os mesmos bens podem ser posicionados em ordens diferentes por dois atores, já que cada um dos atores empregará os bens conforme seus objetivos individuais.

Mas por que indivíduos se empenham em uma troca comercial?

Caso o ser humano vivesse isoladamente, ele estaria limitado a usufruir apenas dos bens naturais que ele encontrasse e dos bens que ele fosse capaz de produzir. Como o indíviduo sempre vai procurar satisfazer o máximo de fins possíveis no mínimo de tempo possível \cite[pp. 42]{rothbard}, torna-se fundamental que o indivíduo colabore com outros indivíduos que possam lhe oferecer bens que ele não teria ou que ele teria que empregar mais tempo, trabalho e fatores de produção para produzir.

E para que haja o interesse de realizar uma troca, cada um dos indivíduos deve possuir um bem ao qual o outro não possua e deseja. Segundo \citeauthoronline{rothbard} \cite[pp. 95]{rothbard} há três diferentes razões para que um indivíduo possua bens diferentes de outro indíviduo:

1. diferenças na adequação e rendimento dos fatores providos pela natureza;
2. diferenças de capital e de bens de consumo duráveis;
3. diferenças na habilidade e no desejo de realizar diferentes tipos de trabalho.

Essas diferenças colaboram para que seja criado uma *divisão do trabalho* em que cada indivíduo se especialize mais em um tipo de produção, empregando fatores de produção, capital e receitas (processos produtivos) diversos. Isso ocorre sobretudo por conta da individualidade de cada ser humano, que possui características e interesses únicos, bem como a diversidade da própria natureza e dos bens naturais que ela provê.

Se pelo contrário, a natureza fosse de tal forma que as condições para a produção fossem as mesmas para cada ponto da terra e que todo ser humano fosse igual a qualquer outro ser humano, então somente neste caso, a divisão do trabalho não ofereceria nenhuma vantagem para a ação humana \cite[pp. 157]{mises}.

É essa especialização de produção que os indivíduos adquirem sejam por condições naturais, ou por preferências individuais, junto com o desejo de se adquirir bens que não possua, que criam o interesse de se envolver em uma troca comercial.

Porém, vale destacar que o desejo por se ter o que não tem pode resultar também no emprego da violência para se adquirir a força o bem de outrem. O roubo bem como a escravidão são as duas formas em que essa violência para obter o bem de outro pode ocorrer. O roubo é esporádico, enquanto que a escravidão é constante e trata o escravizado como um fator de produção.

O trabalho sob regime de coerção (escravidão) é denominado *trabalho compulsório* e é qualitativamente diferente do *trabalho voluntário*. Além das razões éticas que demonstram que o emprego da violência é errado existem ainda as consequências a longo prazo que superam os ganhos econômicos de curto prazo do emprego da violência para obter bens \cite[pp. 81]{rothbard}.

Sendo assim, a troca é a única forma ética de se obter bens de outrem e além disso permite que um indivíduo obtenha um bem ao qual não tinha acesso ou ao qual não valia o seu esforço de produzí-lo. A troca potencializa as capacidades de cada indivíduo deixando-lhe concentrar suas ações no que lhe trará maior contentamento e ainda lhe dando a oportunidade de adquirir o que não consegue ou não deseja produzir.

As trocas comerciais podem ocorrer de forma direta, através do escambo, ou de forma indireta através do emprego de dinheiro, porém esse assunto será abordado na próxima seção.

Qualquer intrusão ou força física agressiva em trocas voluntárias é caracterizado com uma *intervenção* e causa a substituição de ações voluntárias por forças coercitivas, o que vai de encontro ao livre mercado \cite[pp. 877]{rothbard}.
As transações econômicas que ocorrem sem intervenção, constituem portanto um *livre mercado*. Em outras palavras, *livre mercado* é a liberdade de transacionar com outros indivíduos de forma voluntária e pacífica, sem a interferência de terceiros que não sejam bem-vindos.

A intervenção usa da força para provocar uma ação que não ocorreria de outra forma, e é portanto uma ação que fere as liberdades individuais das pessoas, impedindo-as de empregar seus esforços no que elas consideram ter maior valor para elas.

Qualquer intervenção no livre-mercado, portanto, é uma tirania e causa um estado de menor conforto aos indivíduos que sofrem a coerção, caso contrário, não seria necessária o emprego da força. Portanto, é importante garantir meios que impeçam a intervenção de terceiros e garantam que trocas comerciais ocorram somente através da livre associação e de forma voluntária. e que consequentemente beneficie os participantes.

## Criptomoedas

As criptomoedas, um dinheiro virtual que utiliza conceitos e algorítmos oriundos da criptografia, teve sua história moldada por pequenos e progressivos avanços na área da criptografia. Portanto, é importante entender a contribuição de diferentes autores que culminaram no advento do *Bitcoin*, a principal criptomoeda em circulação atualmente.

Embora já houvessem soluções de pagamento envolvendo dinheiro virtual em \citeyear{blindsignature}, \citeauthoronline{blindsignature} preocupou-se com uma importante característica das transações no mundo real que não estava presente nas transações virtuais: a privacidade.

No mundo real, o dinheiro pode ser passado de Alice para Carlos sem que Bob ou qualquer outro agente saiba disso. Embora isso permita a utilização do dinheiro para fins ilícitos, essa característica também permite que os indivíduos possam realizar transações que caso fossem descobertas por terceiros lhe causariam constrangimento, humilhação, retaliação, e em último causo poderia servir como meio de coerção, repressão, censura e controle político por governos ou instituições privadas que tivessem o interesse de impedir a livre manifestação de opiniões e o direito a livre associação.

Com essa preocupação, \citeauthor{blindsignature} descreveu as características que um sistema automatizado de pagamento virtual deveria ter:

1. Impossibilidade de terceiros determinarem o recebedor do pagamento, a data e hora que o pagamento foi realizado bem como a quantia que foi paga pelo indivíduo;
2. Capacidade dos indivíduos provarem que um pagamento foi efetuado ou determinar a identidade do beneficiário do pagamento sob circunstâncias excepcionais;
3. Capacidade de se negar o uso de meios de pagamentos reportados como roubados.

O sistema proposto baseava-se na utilização de assinaturas digitais e funcionaria da seguinte forma:

1. Um indivíduo, aqui chamado de Alice, utilizaria uma chave privada escolhida randomicamente e assinaria um documento digital;
2. Cada documento digital representa uma unidade de valor monetário;
3. Alice enviaria o documento digital assinado para um banco, aqui descrito como Bob;
4. Bob assinaria o documento recebido com sua chave privada e o devolveria a Alice;
5. Alice, com sua chave privada conseguiria verificar que o conteúdo do documento não foi alterado e que foi assinado por Bob. Caso fosse constatado uma fraude o processo seria interrompido;
6. Alice então teria um documento validado por Bob e poderia dar o documento posteriormente para o beneficiário do pagamento;
7. O beneficiário, aqui descrito como Carlos, enviaria o documento a Bob, que conseguiria verificar que a nota foi assinada com sua assinatura digital;
8. Bob então registraria que a nota foi utilizada e depositaria uma unidade de valor para o beneficiário. Caso a nota já tivesse sido marcada como utilizada, a operação seria interrompida, por ser uma fraude;

Com essa solução, Bob não conseguiria saber que Alice fez um pagamento para Carlos, já que o documento que Carlos apresentou a Bob poderia ter sido assinado por qualquer outra pessoa, e tampouco conseguiria saber a data do pagamento, já que Alice poderia demorar um tempo indefinido entre os passos 6 e 7.

A figura \ref{fig:blind-signature} ilustra o processo de assinatura do documento em alto nível e a figura \ref{fig:blind-signature-rsa} ilustra o processo utilizando o algorítmo Rivest–Shamir–Adleman (RSA).

\begin{figure}[htbp]
  \centering
  \caption{\label{fig:blind-signature}Exemplo em alto nível de uso de assinatura cega.}
  \includegraphics[width=1.0\textwidth]{imagens/blind-signature.jpg}
  \legend{Fonte: \citeauthor{blindsignaturewiki}.}
\end{figure}

\begin{figure}[htbp]
  \centering
  \caption{\label{fig:blind-signature-rsa}Implementação da assinatura cega utilizando o algorítmo RSA.}
  \includegraphics[width=1.0\textwidth]{imagens/blind-signature-rsa.jpg}
  \legend{Fonte: \citeauthor{blindsignaturewiki}.}
\end{figure}

Embora o processo descrito garanta que Bob não conheça o conteúdo do documento e por isso não consiga saber quem emitiu originalmente o documento, ele ainda requer que um agente central (Bob) registre as operações de entrada e saída de valor e garanta o valor monetário do documento, e por isso pode apenas ser considerado como uma camada de privacidade que complementa o sistema bancário vigente, trazendo o anonimato das operações transacionadas através de dinheiro em espécie para o mundo das transações virtuais.

Foi apenas em \citeyear{timestamp} que surgiu uma solução com potencial de resolver o problema da dependência de um agente central para registro de informações importantes. \citeauthor{timestamp} pensando na facilidade em modificar e copiar documentos digitais, e no problema que isso causa ao tentar determinar quando um documento digital é criado ou modificado, criaram uma maneira de registrar documentos eletrônicos de forma a garantir a autenticidade, a data de registro, bem como a imutabilidade de seu conteúdo, e impossibilitando a adulteração dessas informações por quem os armazenassem.

Essa solução, que viria a ser conhecida como *blockchain*, consistia de um algorítmo de encadeamento de dados em que o elemento seguinte da cadeia é criado a partir de informações contidas no documento anteriormente registrado, e que seria armazenada e validado de forma descentralizada por seus utilizadores, garantindo que mesmo que um grupo de utilizadores tentassem corromper os dados, ou outros teriam como identificar a fraude.

A solução de \citeauthoronline{timestamp} foi concebida para funcionar com qualquer documento digital, independente do formato ou tamanho, e para garantir isso ele propôs o uso de uma família de funções criptograficamente segura  e livre de colisões, mais conhecidas como funções *hash* (fig. \ref{fig:hash}).

\begin{figure}[htbp]
  \caption{\label{fig:hash}Exemplo de \emph{função hash}.}
  \begin{center}
    \includegraphics[width=0.35\textwidth]{imagens/hash.png}
  \end{center}
  \legend{Fonte: \citeauthor{hashimage}.}
\end{figure}

A *função hash* garante que um arquivo de mesmo conteúdo, sempre gere um mesmo conjunto de caracteres (chamado de *hash do arquivo*, ou simplesmente *hash*) e que a probabilidade de dois ou mais arquivos diferentes produzirem o mesmo *hash* seja baixa o suficiente para ser desprezada. Com isso, arquivos gigantes podem ser reduzidos a poucos caracteres, facilmente armazenáveis e probabilisticamente únicos.

Qualquer adulteração de um documento gera um *hash* diferente, evidenciando uma tentativa de fraude do mesmo. Assim, se Alice pode registrar um documento *X* com Bob apenas aplicando uma *função hash F* conhecida no documento *X*, que geraria um *hash* *h* que deveria então ser armazenado por Bob.

Se Carlos, por exemplo, vier a suspeitar de que o arquivo *X* foi adulterado, bastaria ele usar a mesma *função hash f* no arquivo X e verificar se o *hash* produzido é o mesmo armazenado por Bob.

Porém, para garantir que a propriedade do documento X seja realmente de Alice, \citeauthoronline{timestamp} sugeriram o uso de assinaturas digitais.

Uma assinatura digital é equivalente a uma assinatura escrita, provendo uma maneira de produzir um documento digital cuja autenticidade pode ser verificada por qualquer um mas que não possa ser produzido por ninguém além do autor original.

A assinatura digital é possível através da utilização de um par de chaves *E* e *D* que possa ser utilizada em qualquer mensagem/documento *M*, possuindo as seguintes propriedades \cite{encdenc}:

1. *E* é uma função inversa de *D*;
2. Para cada mensagem *M*, *E(M)* e *D(M)* são fáceis de serem computados;
3. *E* é computacionalmente inviável de ser descoberto a partir de *D*;
4. *E* e *D* são computacionalmente fáceis de serem gerados a partir de uma chave *K*.

A propriedade 3 permite que a chave *D* possa ser exposta em meios públicos e acessíveis sem comprometer a chave *E*.

Através do uso do par de chaves *E* e *D*, \citeauthoronline{encdenc} propôs que se Alice desejar enviar uma mensagem *M* para Carlos, ela deveria 'decriptar' a mensagem *M* usando a chave secreta *D\textsubscript{Alice}*, enviando para Carlos a mensagem *D\textsubscript{Alice}(M)*. Quando Carlos receber a mensagem *D\textsubscript{Alice}(M)*, ele poderá 'encriptá-la' utilizando a chave pública de Alice (*E\textsubscript{Alice}*) e ler o conteúdo original *M*.

A mensagem *D\textsubscript{A}(M)* deverá ser guardada para servir como prova de que Alice foi a autora da mensagem, já que qualquer pessoa que desconfie da autoria da mensagem apenas teria que usar a chave pública de Alice (*E\textsubscript{Alice}*) para produzir a mensagem *M*. Qualquer outra chave pública utilizada em *D\textsubscript{A}(M)* resultaria em um resultado completamente diferente de *M*.

Utilizando essa técnica consegue-se averiguar a qualquer momento se um indivíduo assinou ou não um documento digital.

Além de identificar a autoria do documento também é importante armazenar a data e horário de criação ou modificação do documento, e \citeauthoronline{timestamp} para resolver esse problema sugeriram que o *hash* do arquivo deveria ser concatenado com o horário e data do registro e só então ser assinado com a chave *D* do autor do registro. Com isso, apenas com um *hash* pequeno poderia se registrar um documento com as informações de quando ele foi criado ou modificado e quem é o autor do documento.

Ainda assim, é necessário confiar em um agente central (Bob), que poderia facilmente ser corrompido por Carlos sem que Alice conseguisse provar a fraude. \citeauthoronline{timestamp} propuseram uma solução denominada *confiança distribuída*.

Nessa solução, haveria um gerador pseudoaleatório\footnote{\emph{gerador pseudoaleatório} é um algorítmo que usa \emph{bits} verdadeiramente aleatórios para gerar de forma determinística uma longa sequência de \emph{bits} \cite{pseudo}.} *G* disponível para todos os indivíduos que desejassem registrar documentos. Quando Alice desejasse registrar um documento, ela deveria gerar um *hash y* do documento, e usá-lo como *seed*\footnote{\emph{seed} (semente) é o nome que se dá a sequência de bits verdadeiramente aleatória utilizada no gerador pseudoaleatório.} para o gerador *G*, o que produzirá uma sequência de *bits* que podem ser agrupadas de maneira a forma um número *k* de *IDs*, conforme mostrado na equação \ref{eqn:g} \cite{timestamp}.

\begin{equation}
\label{eqn:g}
G(y) = (ID_{1}, ID_{2}, ..., ID_{k})
\end{equation}

Cada *ID* gerado corresponde a um identificador de um cliente (usuário desse sistema distribuído) e Alice deveria portanto enviar para cada um desses clientes uma requisição composta de seu próprio *ID* junto com o *hash y*. Cada cliente que recebesse essa requisição de Alice, deveria assinar a mensagem incluíndo o tempo *t* do ínicio do processamento, conforme a equação \ref{eqn:s} e enviar o resultado de volta para Alice \cite{timestamp}.

\begin{equation}
\label{eqn:s}
s_{j} = \sigma_{j}(t, ID, y)
\end{equation}

O único requisito para essa arquitetura funcionar é haver uma lista pública de clientes disponíveis de maneira a ser possível interpretar o resultado de *G(y)* como um conjunto de *k* clientes prontos para serem requisitados.

Para resolver o possível problema de indisponibilidade de clientes \citeauthoronline{timestamp} afirmaram que bastaria a função *G* gerar um número suficientemente grande de *k* clientes de forma a garantir que haverá a disponibilidade de $k' < k$ clientes, sendo *k'* um número suficientemente grande de forma a garantir que seja improvável que a maioria dos clientes estejam ávidos por falsificar o *timestamp* do documento.

Com essa solução, \citeauthoronline{timestamp} elaboraram uma solução que embora tenha sido concebida para o registro de documentos digitais, poderia ser utilizada para criar um sistema de transações financeiras digitais que não estivesse livre de agentes centrais.

Em 1992, Timothy May, um físico aposentado, temendo as ameaças e restrições que os governos ao redor do mundo poderiam impor sobre o acesso as informações convidou um grupo de amigos à sua casa para discutir sobre privacidade e *internet* \cite{answertocash}.

Este grupo se auto nomeou *Cypherpunks* e em \citeyear{cyphermanifesto} lançou seu manifesto em que declara sua preocupação com a regulação da criptografia e cita sua intenção em criar uma moeda digital:

\begin{displayquote}[\citeauthor{cyphermanifesto} - tradução do autor]

Nõs, os \emph{Cypherpunks}, estamos dedicados a construir sistemas anônimos. Nós estamos defendendo nossa privacidade através da criptografia, com sistemas de encaminhamento de e-mails anônimos, com assinaturas digitais, e com dinheiro digital.

\end{displayquote}

Em \citeyear{junkmail}, \citeauthor{junkmail} propuseram uma técnica que poderia ser utilizada por provedores de e-mail em que seria requerida a computação de uma função moderadamente difícil para quem decidisse enviar um e-mail, dificultando o envio de grandes quantidades de e-mails, o que tinha como intenção reduzir o número de SPAMs (e-mails indesejados).

\citeauthoronline{junkmail} chamaram essa função de *função de precificação*, e foi apresentada como uma alternativa as soluções que estavam sendo propostas na época, que incluíam a criação de uma lei que caracterizava o envío de e-mails não autorizados como contravenção penal; e a cobrança de impostos para cada e-mail enviado ou a partir de certo número de e-mails enviados por dia.

\citeauthor{hashcash} propôs uma solução semelhante, e segundo o autor, sem ter o conhecimento do trabalho de \citeauthoronline{junkmail}. Essa solução foi denominada *Hashcash* e também foi idealizada para reduzir o número de SPAMs, além de ser uma forma de prevenir ataques DDoS (*Distributed Denial of Service* -  Ataque Distribuído de Negação de Serviço).

Para \citeauthoronline{hashcash}, as funções de custo deveriam ser eficientemente verificáveis e não proverem vantagem para o servidor responsável por criar os desafios, já que caso contrário, o servidor teria um conflito de interesses e teria a possibilidade de utilizar essa vantagem para ganhos próprios.

Alguns dos diferenciais da função de custo *Hashcash* eram as alterações dos desafios a cada intervalo de tempo, o que evitaria a pré-computação de respostas; e o ajuste do custo computacional necessário para decifrar o desafio, o que permitiria a adaptação do nível do desafio de acordo com a demanda de requisições que o servidor enfrentava.

O *Hashcash* veio a ser conhecido como sendo um algorítmo *PoW* (*Proof-of-Work* - Prova de Trabalho) e foi aprimorado por \citeauthor{rpow} em \citeyear{rpow}.

O algorítmo de \citeauthoronline{rpow}, o RPOW (*Reusable Proof-of-Work* - Prova de Trabalho Reutilizável), recebia um *hashcash* e o trocava por um *token* *RPOW* que poderia então ser gasto para produzir um novo *token RPOW*. Cada *token RPOW* poderia ser utilizado apenas uma vez e gerava um novo token.

Como o *RPOW* garante o conceito de gasto único, é sempre criado inicialmente a partir de uma prova de trabalho, e dá origem a um novo token que pode ser novamente trocado, pode-se considerá-lo como o primeiro bem digital que utiliza algorítmos criptográficos com capacidade de servir como meio de troca, um grande passo para a criação de uma moeda digital.

Em \citeyear{bitgold}, \citeauthoronline{bitgold} expressou sua preocupação com o fato de o valor do dinheiro atualmente utilizado pela sociedade depender exclusivamente na confiança depositada em um agente centralizador e propôs a moeda *Bit Gold* que teria como características: uma dependência mínima em agentes centralizadores, armazenada de forma segura, transferível, e que pudessem ter sua autenticidade verificada \citeauthor{bitgold}. \citeauthoronline{bitgold} se inspirou nas propriedades dos metais preciosos, principalmente o ouro para conceber a ideia do *Bit Gold*.

O *Bit *Gold* funcionaria da seguinte forma:

1. Um *conjunto de bits*, denominado *desafio criptográfico* seria criado;
2. Alice, em seu computador, geraria uma *prova de trabalho* a partir do *desafio criptográfico* utilizando uma função criptográfica de referência;
3. A *prova de trabalho* contém uma *marcação temporal* de quando foi produzida. Essa *marcação temporal* seria registrada por qualquer ou mesmo vários serviços de *marcação temporal* que comprovariam a confiabilidade da data de criação da *prova de trabalho*.
4. Alice registraria a *prova de trabalho* junto com a *marcação temporal* em um serviço computacionalmente distribuído compatível com o *Bit Gold*. A partir de então, esse seria oficialmente um registro *Bit Gold*;
5. O último registro de *Bit Gold* provê o *desafio criptográfico* que servirá como insumo para a próxima *prova de trabalho*, que gerará o próximo registro de *Bit Gold*;
6. Para verificar que Alice é a proprietária de um registro de *Bit Gold*, Bob checaria a cadeia de registros de *Bit Gold* em qualquer serviço de registro de *Bit Gold*;
7. Para averiguar o valor do registro de *Bit Gold*, Bob checaria e verificaria o *desafio criptográfico*, a *prova de trabalho* e a *marcação temporal* do registro.

Como cada registro de *Bit Gold* está ligado ao próximo registro de *Bit Gold*, e esses registros estão registrados em diversos serviços distribuídos e independentes, entende-se que essa cadeia de registros, a *blockchain*, é inalterável.

\citeauthoronline{bitgold} destaca que todos os tipos de dinheiro já utilizados tem alguma forma de insegurança, desde falsificação à facilidade de roubo, mas que provavelmente a pior insegurança que um dinheiro possa ter é a inflação. E o *Bit Gold* seria uma solução de moeda que apresentaria em sua arquitetura essa segurança contra a inflação.

E em \citeyear{bitcoin}, \citeauthoronline{bitcoin}, um pseudônimo pertencente a um ou vários indivíduos até hoje desconhecidos, a partir das ideias e tecnologias já apresentadas, concebeu o *Bitcoin*.

Embora tenha sido inspirado na ideia de *blockchain* concebida por \citeauthoronline{timestamp} e nas moedas *b-cash*, *Hascash* e provavelmente na moeda *Bit Gold*, o *Bitcoin* apresentou com mais detalhes como uma *blockchain* poderia ser utilizada para criar um sistema eletrônico de registro de transações que nâo dependesse de nenhum agente central e que conseguisse garantir as características necessárias para tornar-se uma moeda *de facto*.

\citeauthoronline{bitcoin} definiu o termo *moeda eletrônica* como sendo uma cadeia de assinaturas digitais \cite{bitcoin}, em que Alice transferiria uma quantia de dinheiro para Carlos assinando digitalmente o *hash* da última transação registrada junto com a chave pública de Carlos (fig. \ref{fig:transaction}).

\begin{figure}[htbp]
\caption{\label{fig:transaction}Registro de transação em uma cadeia de assinaturas digitais.}
\begin{center}
\includegraphics[width=1.0\textwidth]{imagens/transaction.png}
\end{center}
\legend{Fonte: \citeauthor{bitcoin}.}
\end{figure}

Além do simples registro da transação, informando valor, pagador e recebedor, é necessário também que haja a garantia de que Alice ao ter transferido uma quantia de dinheiro para Carlos, não possa transferir essa mesma quantia para outra pessoa, ou seja, é necessário impedir o gasto duplo. Em um sistema tradicional essa verificação ficaria a cargo de um agente central que seria o responsável por verificar se uma transação pode ocorrer e de registrá-la em um livro-razão, que pode ser armazenada em bases de dados tanto físicas quanto digitais.

Mas a partir do momento que se dá a uma entidade ou indivíduo o poder de manipular transações, problemas de confiança surgem: será que o agente central não está usando esse poder para benefício próprio? Será que o agente central é capaz de garantir a segurança das informações que ele detém?

A criação de um livro-razão público resolveria o problema de gasto duplo sem a necessidade de um agente central, já que qualquer um poderia verificar se uma transação já foi feita antes de aceitar uma nova, porém a capacidade de qualquer agente poder registrar uma transação no livro-razão cria o *Problema dos Generais Bizantinos*.

\citeauthoronline{byzantine} formalizaram em \citeyear{byzantine} o *Problema dos Generais Bizantinos*. Esse problema é apresentado por uma história fictícia de um exército bizantino acampado ao redor de uma cidade inimiga. O exército é composto por diversas divisões, cada uma comandada por um general, e a comunicação entre os generais só pode ocorrer por meio de troca de mensagens entre si.

O exército deve decidir por usar um plano de ação único, porém deve-se considerar que dentre os generais pode haver traidores. Assim, o problema é caracterizado por \cite{byzantine}:

i. Todos os generais leais devem adotar um mesmo plano de ação;
ii. Um grupo pequeno de traidores não pode conseguir que os generais leais adotem um plano de ação ruim.

Nesse problema teórico computacional, todos os generais leais farão o que o algorítmo implementado disser, porém, os traidores utilizarão qualquer outro algorítmo com o objetivo de chegar a uma ação considerada ruim para os interesses do exército.

Como \citeauthoronline{byzantine} explicitam, o algorítmo utilizado pelos generais leais devem garantir a condição (i) independente do que os traídores fizerem, e os generais leais não apenas devem chegar a um acordo sobre o que fazer, como também devem chegar a um acordo sobre um plano de ação razoável, ou em outras palavras, benéfico para o exército bizantino.

Para resolver o *Problema dos Generais Bizantinos* no contexto de registro de transações em um livro-razão público, é necessário considerar as seguintes características desse livro-razão:

1. O livro-razão pode ser escrito por qualquer um, ou seja, não existe um agente central que define quem pode escrever no livro-razão;
2. O livro-razão deve impedir o gasto duplo;
3. Todos os participantes não-fraudulentos devem concordar que o conteúdo do livro-razão é o correto e único aceito;

A terceira característica remete ao *Problema dos Generais Bizantinos*. A primeira característica se opõe a qualquer tipo de regulação centralizada, enquanto que a segunda característica garante que esse livro-razão possa ser utilizado como um sistema de transações financeiras confiável.

Para garantir a terceira característica, a simples votação entre os participantes, solução tradicional proposta por \citeauthoronline{byzantine}, não seria suficiente pois não há como impedir que novos participantes entrem no sistema, o que tornaria fácil a multiplicação artificial de agentes fraudulentos, que invariavelmente conseguiriam se tornar a maioria e consequentemente obteriam sucesso em fraudar o livro-razão.

Por isso \citeauthoronline{bitcoin} propôs a utilização de um algorítmo de prova de trabalho (*PoW - Proof of Work*) para registrar uma transação no livro-razão, inspirado pelo trabalho de \citeauthoronline{hashcash}. De forma simplificada, a prova de trabalho obriga que qualquer agente que queira escrever no livro-razão seja obrigado a calcular uma função *hash*, que é computacionalmente dispendiosa e cujo resultado é probabilisticamente difícil de ser o correto (apenas quem calcula um resultado correto consegue escrever no livro-razão).

Além do trabalho despendido para escrever uma transação no livro-razão, seja ela uma transação fraudulenta ou não, os agentes não-fraudulentos apenas confiarão no livro-razão mais extenso, ou seja, a única forma de enganar os participantes não-fraudulentos seria os fraudadores possuírem mais poder de processamento do que todos os participantes não-fraudulentos juntos. Quanto mais participantes não-fraudulentos entram neste processo de escrita concorrente, mais improvável de ocorrer torna-se uma fraude, e mais caro torna-se tentar fraudar o livro-razão.

Para que o livro-razão fosse público, distribuído, descentralizado e digital, \citeauthoronline{bitcoin} descreveu um sistema *peer-to-peer*\footnote{\emph{peer-to-peer} (p2p - ponto-a-ponto) é o nome que se dá a uma arquitetura de rede distribuída em que os participantes compartilham parte de seus recursos de \emph{hardware} (poder de processamento, capacidade de armazenamento, etc) para outros \emph{peers} (pontos) diretamente, sem passar por entidades intermediárias. Esses recursos compartilhados são necessários para prover o serviço e/ou conteúdo oferecido pela rede, e cada participante dessa rede é ao mesmo tempo provedor e consumidor de recursos \apud{kellerer}{p2p}.} em que as transações seriam registradas em blocos, e em que cada novo bloco dependeria do bloco anteriormente registrado (fig. \ref{fig:blockchain}), criando uma *blockchain*. Esse sistema teria as seguintes características:

\begin{figure}[htbp]
  \caption{\label{fig:blockchain}Arquitetura da \emph{Blockchain}}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/blockchain.png}
  \end{center}
  \legend{Fonte: \citeauthor{zheng2017overview}.}
\end{figure}

1. Novas transações deverão ser transmitidas para todos os nós (participantes) da rede;
2. Cado nó reúne as novas transações em um único bloco;
3. Cada nó tenta realizar uma prova de trabalho válida para o seu bloco;
4. Quando um nó encontra uma prova de trabalho válida ele transmite o bloco para todos os nós da rede;
5. Os nós da rede apenas aceitam o novo bloco se todas as transações contidas nesse bloco forem válidas e já não tiverem sido gastas;
6. Os nós expressam sua aceitação ao novo bloco trabalhando para criar o próximo bloco da *blockchain* usando o *hash* do bloco aceito como o *hash* anterior do bloco a qual estão trabalhando (fig. \ref{fig:prev-hash}).

\begin{figure}[htbp]
  \caption{\label{fig:prev-hash}O próximo bloco a ser criado deve conter o hash do último bloco aceito como válido.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/prev-hash.png}
  \end{center}
  \legend{Fonte: \citeauthor{bitcoin}.}
\end{figure}

Se dois nós transmitirem versões diferentes do próximo bloco, ou seja, se forem criado dois blocos válidos ao mesmo tempo (um chamado de *U4* e outro de *B4*), os demais nós da rede sempre trabalharão em cima do primeiro bloco que receberem. Esse acontecimento causaria a criação de duas ramificações concorrentes da *blockchain*, uma contendo *U4* como último bloco, e outra contendo *B4* como último bloco (fig. \ref{fig:long-branch}). Porém, a partir do momento que uma dessas ramificações se tornar maior (em número de blocos registrados) do que a outra, todos os nós que estiverem trabalhando na ramificação menor automaticamente abandonarão essa ramificação em detrimento da ramificação maior \cite{bitcoin}.

\begin{figure}[htbp]
  \caption{\label{fig:long-branch}Disputa entre duas ramificações da \emph{Blockchain}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/long-branch.png}
  \end{center}
  \legend{Fonte: \citeauthor{zheng2017overview}.}
\end{figure}

Mesmo considerando um cenário probabilístico em que dezenas de ramificações concorrentes surjam simultaneamente, como é altamente improvável que haja sempre o mesmo número de nós trabalhando em cada ramificação, a *blockchain* sempre tenderá a longo prazo a se manter com apenas uma ramificação.

Como já discutido no *Problema dos Generais Bizantinos*, mesmo que um grupo de nós decida deliberadamente não obedecer esse algorítmo, eles apenas teriam sucesso em convencer os demais nós de que a sua ramificação fraudulenta da *blockchain* é a verdadeira, caso tivessem um poder de processamento maior do que a maioria dos nós não-fraudulentos.

Para que esse sistema seja viável é necessário que haja diversos nós, sendo que quanto maior for a quantidade de nós na rede, maior será a impossibilidade de fraudar a *blockchain*, por isso, \citeauthoronline{bitcoin} especificou que a primeira transação de cada bloco seria uma transação que cria unidades de *Bitcoin*\footnote{A primeira transação de cada bloco da \emph{Blockchain} do \emph{Bitcoin} serve como uma recompensa para quem criou o bloco. Inicialmente a recompensa era de 50 unidades de \emph{Bitcoin} (BTC 50,00), e a cada 210 mil blocos gerados (o que leva aproximadamente 4 anos) a recompensa é reduzida pela metade. Até junho de 2019 essa recompensa era de 12.5 BTC \cite{dev-ref}.}, que passa a ser de propriedade do criador do bloco, sendo a única forma de criar novas unidades de *Bitcoin*. Isso remove completamente a figura de bancos centrais, que em moedas fiduciárias são responsáveis por emitir novas unidades de dinheiro.

O *Bitcoin*, assim como o *Bit Gold* foi concebido com a ideia de imitar o padrão ouro, e por isso foi estipulado em seu protocolo que deverá ser emitido um máximo de 21 milhões de unidades de *Bitcoin*. E para que haja um incentivo para que participantes continuem adicionando blocos na *blockchain* mesmo quando o limite de 21 milhões de unidade for alcançado, também foi concebido em seu protocolo que cada transação processada paga uma taxa para o nó que registrou o novo bloco de transações na *Blockchain* \cite{better}.

Para que seja permitido o registro de transações com frações de *Bitcoin*, cada transação (fig. \ref{fig:transaction-fraction}) é composta por entradas e saídas. Deve haver em cada transação uma ou mais entradas (isso permite que haja a junção de vários pequenas quantidades de *Bitcoins* para totalizar o valor a ser transferído para o recebedor) e uma ou duas saídas (uma para pagar o recebedor e outra para o troco, caso exista) \cite{transaction-guide}.

\begin{figure}[htbp]
  \caption{\label{fig:transaction-fraction}Composição de uma transação na \emph{Blockchain}.}
  \begin{center}
  \includegraphics[width=0.5\textwidth]{imagens/transaction-fraction.png}
  \end{center}
  \legend{Fonte: \citeauthor{bitcoin}.}
\end{figure}

A figura \ref{fig:transaction-ex} mostra um exemplo de uma sequência de seis transações:

- Alice utiliza seus 10 mil *satoshis* na transação 0;
  - Bob recebe 40 mil *satoshis* de Alice;
  - 50 mil *satoshis* voltam para Alice como troco;
  - 10 mil *satoshis* ficam com o minerador\footnote{\emph{Minerador} é o dispositivo (nó) ou indivíduo que possuí esse dispositivo, que minera um novo bloco (cria um novo bloco na \emph{blockchain}) \cite{bitcoin-glossary}.} como taxa de transação\footnote{A taxa de transação é a diferença entre entrada e saída de uma transação, sendo um valor variável que depende do tamanho (em *bits*) da transação.}.
- Bob gasta seus 40 mil *satoshis* na transação 1;
  - Carlos recebe 30 mil *satoshis* de Bob;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Carlos gasta seus 30 mil *satoshis* na transação 3;
  - Denis recebe 20 mil *satoshis* de Carlos e os mantém sem gastá-los;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Alice utiliza seus 50 mil *satoshis* na transação 2;
  - Eduardo recebe 20 mil *satoshis* de Alice;
  - 20 mil *satoshis* voltam para Alice como troco;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Eduardo gasta seus 20 mil *satoshis* na transação 4;
  - Fernando recebe 10 mil *satoshis* de Eduardo;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Alice gasta seus 20 mil *satoshis* na transação 5;
  - Gustavo recebe 10 mil *satoshis* de Alice;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.
- Fernando e Gustavo gastam cada um 10 mil *satoshis* na transação 6;
  - Hélio recebe 10 mil *satoshis*, 5 mil oriundos de Fernando e 5 mil oriundos de Gustavo. Hélio não gasta os 10 mil *satoshis* que recebeu;
  - 10 mil *satoshis* ficam com o minerador como taxa de transação.

\begin{figure}[htbp]
  \caption{\label{fig:transaction-ex}Exemplo de sequência de transações.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/transaction-ex.png}
  \end{center}
  \legend{Fonte: \citeauthor{blockchain-guide}.}
\end{figure}

Cada *output* (saída) de uma transação é oriundo de um *input* (entrada) de uma transação anterior e só pode ser utilizado em uma única transação, o que garante que não haja gasto duplo. Um *output* que não vira *input* para outra transação é, portanto, um valor não gasto, sendo denominado neste cenário um *UTXO* (*Unspent Transaction Output* - Saída de Transação não Gasta).

\begin{figure}[htbp]
  \caption{\label{fig:publichash}Processo de Geração do \emph{Public Key Hash}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/publichash.png}
  \end{center}
  \legend{Fonte: \citeauthor{transaction-guide}.}
\end{figure}

Cada *UTXO* contém um valor em *satoshi* disponível para ser gasto e um *Public Key Hash*. O *Public Key Hash* de um *UTXO* também é conhecido como *Redeem Script Hash*, que é um *hash* produzido a partir da chave pública do proprietário do *UTXO* (fig. \ref{fig:publichash}). Quando o dono do *UTXO* desejar gastar seu *UTXO* ele deve utilizar sua chave privada junto com um *script* denominado *Full Redeem Script* que ao ser aplicado no *Public Key Hash* do *UTXO*, liberá-o para ser gasto em uma nova transação. O *Public Key Hash* é único para cada *UTXO* e apenas a chave privada que o originou é capaz de gastá-lo (fig. \ref{fig:output}) \cite{transaction-guide}.

\begin{figure}[htbp]
  \caption{\label{fig:output}Gasto de um \emph{Output}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/output.png}
  \end{center}
  \legend{Fonte: \citeauthor{transaction-guide}.}
\end{figure}

\begin{figure}[htbp]
  \caption{\label{fig:block}Estrutura de um bloco da \emph{Blockchain}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/block.png}
  \end{center}
  \legend{Fonte: \citeauthor{zheng2017overview}.}
\end{figure}

O bloco (fig. \ref{fig:block}) armazenado na *Blockchain* além de conter as transações nele registradas, contém \cite{dev-ref}:

- *Contador de Transações*: o número de transações registradas no bloco;
- *Versão do Bloco*: a versão das regras de validação ao qual o bloco obedece. Isso permite que o protocolo do *Bitcoin* evolua mantendo a compatibilidade com blocos antigos. A versão atualmente utilizada nos novos blocos é a versão 4;
  - Versão 1: introduzida no *Bloco Genesis* da *Blockchain*, em janeiro de 2009;
  - Versão 2: introduzida em setembro de 2012;
  - Versão 3: introduzida em fevereiro de 2012;
  - Versão 4: introduzida em novembro de 2015.
- *Time Stamp* (Marcação de Tempo): data e hora em que o bloco foi criado. Deve ser estritamente maior do que a média das marcações de tempo dos últimos 11 blocos da *Blockchain*;
- *Hash do Último Bloco*: contém o *hash* do último bloco adicionado na *Blockchain. Isso permite que a partir de qualquer bloco consiga-se acessar o bloco anterior, característica comum de uma estrutura de dados simplesmente encadeada.
- *Merkle Tree Root Hash*: *hash* gerado a partir dos *hashes* de todas as transações registradas no bloco. Isso garante que qualquer alteração nas transações do bloco seja facilmente identificada e rejeitada por outros nós da rede, impedindo fraudes nas transações;
- *Nonce*: um número arbitrário utilizado para que seja possível realizar a prova de trabalho;
- *nBits*: é o valor limite a qual o resultado do algorítmo de prova de trabalho deve ser inferior para ser considerado válido.

O *Merkle Tree Root Hash* (fig. \ref{fig:hashtree}) é uma estrutura de dados em árvore em que os nós superiores são calculados a partir do valor dos nós inferiores. Isso garante que qualquer alteração no conteúdo dos nós inferiores seja facilmente identificada. Esse mecanismo permite que blocos antigos que já tiveram suas transações válidas por diversos nós possam ter suas transações descartadas pelos mineradores para reduzir espaço em disco mas sem comprometer o algorítmo de validação do bloco.

\begin{figure}[htbp]
  \caption{\label{fig:hashtree}Estrutura de um \emph{Merkle Tree Root Hash}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/hashtree.png}
  \end{center}
  \legend{Fonte: \citeauthor{bitcoin}.}
\end{figure}

No caso do protocolo do *Bitcoin*, o processo de formação do \emph{Merkle Tree Root Hash} segue os seguintes passos (fig. \ref{fig:merkle}) \cite{dev-ref}:

1. As transação são ordenadas seguindo algumas regras aqui não discutidas;
2. É gerado o *hash* de cada transação a partir do *id* da mesma e utilizando o algorítmo *SHA256*;
3. Os *hashes* são agrupadas em pares, caso sobre um *hash* sem um par, ele é duplicado;
4. Os *hashes* dos pares são concatenados e novamente é aplicado o algorítmo *SHA256* para gerar um novo *hash*;
5. O passos 3 e 4 é repetido até que sobre apenas um *hash*, esse *hash* é denominado \emph{Merkle Tree Root Hash}, e é então guardado no cabeçalho do bloco.

\begin{figure}[htbp]
  \caption{\label{fig:merkle}Exemplo de Formação do \emph{Merkle Tree Root Hash}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/merkle.png}
  \end{center}
  \legend{Fonte: \citeauthor{dev-ref}.}
\end{figure}

Um bloco só pode ser inserido na *Blockchain* caso o minerador conclua a prova de trabalho, que, no protocolo do *Bitcoin*, é realizada aplicando a função *hash SHA256* no *time stamp* e no *nonce* do bloco, porém, o *hash* resultante só será aceito caso ele tenha um valor estritamente inferior ao especificado no campo *nBits*. Caso o *hash* gerado seja igual ou superior ao *nBits*, ele deve ser descartado, como mostrado na figura \ref{fig:hashcalc}.

\begin{figure}[htbp]
  \caption{\label{fig:hashcalc}Cálculo da Prova de Trabalho.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/hashcalc.png}
  \end{center}
  \legend{Fonte: \citeauthor{surveyblockchain}.}
\end{figure}

Como a *função hash* produz um resultado imprevisível, a única forma de achar um resultado que satisfaça essa condição é através de força bruta. Porém, é importante salientar que uma vez encontrado um *hash* que satisfaça a condição, qualquer outro nó pode facilmente verificar se a solução encontrada é verdadeira. Sendo assim, a prova de trabalho é, com o perdão da redundância, trabalhosa porém facilmente verificável.

Pelo fato de a função *hash* sempre produzir o mesmo resultado quando aplicada a um mesmo valor, o *nonce* deve ser incrementado sempre que a tentativa de produzir um *hash* válido falhar. Em último caso, caso todas as tentativas possíveis falhem em produzir um *hash* válido, o *time stamp* pode ser atualizado para que se continue fazendo novas tentativas \cite{surveyblockchain}.

O *nBits* foi especificado para ser um valor variável, permitindo equilibrar a dificuldade de se encontrar um resultado válido. Ou seja, quanto maior for o valor do *nBits*, probabilisticamente menos tentativas serão necessárias para que se encontre uma solução para a prova de trabalho, e quanto menor ele for, probabilisticamente mais tentativas serão necessárias para encontrar uma solução \cite{dev-ref}.

Sempre que 2016 blocos são adicionados ao *Blockchain*, a rede de nós cálcula quanto tempo se passou entre a criação do primeiro e do último bloco desses 2016 blocos e então o *nBits* é recalculado. O tempo ideal estipulado pelo protocolo é que demore exatamente 1.209.600 segundos (duas semanas) para que 2016 blocos sejam gerados. Caso tenha se demorado mais do que duas semanas para produzir os 2016 blocos, o valor do *nBits* é diminuído, e caso tenha-se demorado menos do que duas semanas, o valor do *nBits* é aumentado.

Essa característica de alterar o *nBits* para garantir que a quantidade de blocos gerados em duas semanas seja, em média, sempre igual, permite que o protocolo possa ser utilizado mesmo com o aumento da capacidade de processamento da rede. Quanto mais poder computacional for inserido na rede, mais difícil se tornará de calcular a prova de trabalho, sendo o inverso também verdade.

O primeiro bloco de *Bitcoin*, o Bloco Gênesis, foi minerado em 2009 pelo próprio \citeauthoronline{bitcoin}, e foi incorporado na *transação coinbase*\footnote{\emph{transação coinbase} é o nome dado a primeira transação de cada bloco que, como já discutido no texto, serve como recompensa para quem minerou o bloco. A \emph{transação coinbase} possui um campo de 100 bytes denominado *coinbase script* que pode ser utilizados arbitrariamente pelo minerador sem que o protocolo *Bitcoin* seja violado.} do bloco, o texto **The Times 03/Jan/2009 Chancellor on brink of second bailout for banks**\cite{genesis} em referência a uma manchete do jornal londrino Times sobre a falha do governo britânico de estimular a economia. A figura \ref{fig:times} mostra uma foto da edição do jornal da qual a frase foi retirada.

\begin{figure}[htbp]
  \caption{\label{fig:times}Foto da Edição de 03 de janeiro de 2009 do Jornal \emph{The Times}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/times.png}
  \end{center}
  \legend{Fonte: \citeauthor{timesimg}.}
\end{figure}.

O *Bitcoin* foi criado para se tornar uma moeda descentralizada e livre do poder estatal, e o texto publicado no *Bloco Gênesis*, bem como o fato do *Bitcoin* ter sido lançado em meio a crise financeira que começou em 2008, demonstra o seu objetivo de ser uma moeda concorrente a todas as moedas fiduciárias atualmente em circulação.

O livre mercado só é plenamente possível em um ambiente livre de coerção, em que os indivíduos se sintam livres para realizar trocas voluntárias e que não possam ser ameaçados ou inibidos por forças centralizadoras. O uso de moedas fiduciárias em espécie permite que transações livre de interferências estatais ocorram, porém, na era da conectividade em tempo real é necessário que haja uma moeda digital que garanta ou ao menos melhore a privacidade dos indivíduos que desejem realizar trocas voluntárias.

## Aplicações descentralizadas

Aplicações de *software* podem ser classificadas baseado no seu nível de centralização (fig. \ref{fig:apptypes}). Aplicações centralizadas(a), são as mais comuns e são caracterizadas como aplicações fornecidas ou controladas por apenas um agente ou organização. Aplicações distribuídas(b) são aplicações que possuem diversas replicas espalhadas geograficamente e que cooperam entre si para garantir consistência e disponibilidade de dados \cite{raval}. Atualmente aplicações distribuídas se popularizaram com os serviços de nuvem, em que empresas provêem servidores de aplicações espalhadas pelo mundo que podem ser alugados por outras empresas.

\begin{figure}[htbp]
  \caption{\label{fig:apptypes}Tipos de aplicações de \emph{software}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/apptypes.png}
  \end{center}
  \legend{Fonte: \citeauthoronline{raval} \cite[pp. 3 e 32]{raval}.}
\end{figure}

Aplicações descentralizadas(c) são aplicações em que cada nó opera de forma independente. autônoma e autossuficiente, e que portanto, necessita de um algorítmo de consenso para resolver disputas. Uma aplicação centralizada e distribuída resolve problemas de disponibilidade, latência de rede, problemas de corrupção de dados através da redundância de dados, porém não resolvem problemas de ordem institucional.

No contexto de uma plataforma de mercado livre, é importante que haja mecanismos que garantam a desregulação do mercado, e portanto, uma plataforma centralizada poderia sucumbir por diversos motivos tais como: aquisição da plataforma por outra empresa, que pode culminar numa mudança nas políticas e regras da plataforma; mudança na diretoria da empresa por manobra de acionistas ou conflitos entre acionistas; ação política externa causado por grupos de interesse contrários; ações judiciais ou inconformidade com regras regulatórias de determinadas nações; morte ou incapacitação dos mantenedores.

Para se proteger dessa centralização de poder, \citeauthor{raval} propôs que aplicações descentralizadas, para serem consideradas como tal, devem possuir as seguintes características:

1. Ter código aberto: é inviável criar uma plataforma descentralizada em que apenas um grupo de indivíduos tenha acesso ao código fonte da mesma.
2. Possuir moeda interna: como não existe a propriedade definitiva da plataforma por ninguém, é preciso encontrar uma maneira de incentivar o desenvolvimento da plataforma por desenvolvedores e custear a infra-estrutura da aplicação, para isso normalmente são criados *tokens*\footnote{\emph{tokens}, segundo \citeauthor{token}, são meios de trocas não-autorizados por lei e emitidos por indivíduos privados ou empresa, que é reconhecido como dinheiro e que serve de forma pŕatica a esse propósito.} específicos para a plataforma que funcionam de forma similar a ações de empresas (títulos emitidos por sociedades anônimas), garantindo tanto poder de decisão sobre o rumo da empresa, bem como uma forma de captar investimento externo e premiar os fundadores quando há a valorização do valor da organização.
3. Usar um algorítmo de consenso descentralizado: é o algorítmo de consenso descentralizado (que resolva o *Problemas dos Generais Bizantinos*) que permitirá que nós independentes com resultados conflitantes consigam convergir para um único resultado e assim possa-se garantir que a rede funcione sem chegar nunca a um estado permanente de impasse (*deadlock*).
4. Não possuir ponto central de falha: aplicações descentralizadas, em teoria, não podem ser removidas ou derrubadas, pois não possuem um único ponto de falha. Por funcionar em um sistema *peer-to-peer*, todos os participantes da rede teriam que ser desligados  simultaneâmente para que a aplicação parasse de funcionar. E ainda assim, é facilmente possível que novos nós entrem na rede em uma situação dessa, evitando o seu desligamento. Na prática, porém, isso só é possível quando há o interesse constante de vários e diversos agentes em manter a rede funcionando.

A própria *internet* surgiu como uma rede descentralizada, em que cada computador se conecta a outro computador, dando origem ao termo *World Wide Web* (Rede Mundial de Computadores), e por isso, desde o princípio até hoje, mantem-se como uma estrutura praticamente impossível de ser derrubada, e mesmo páginas *web* consideradas ilegais ou atividades que constantemente são vigiadas ou proibidas por governos, continuam a funcionarem e a estarem disponíveis, no que denominou-se *deep web*\footnote{\emph{deep web} (\emph{internet} profunda) é o termo usado para designar a parte da \emph{internet} que não está acessível por meios tradicionais, tais como ferramentas de pesquisa. Segundo \citeauthor{deep}, estima-se que a \emph{deep web} seja 500 vezes maior do que a \emph{internet} de superfície, nome dado a \emph{internet} prontamente acessível por buscadores.}.

Para que uma aplicação descentralizada seja possível, é necessário que haja regras, ou contratos, que formalizem a operação da aplicação. \citeauthor{smartcontract} criou a definição de *smart contract* (contrato inteligente), que, segundo ele, é a incorporação de cláusulas contratuais no *hardware* e/ou *software* que utilizamos, que tornem a violação do contrato onerosa, e, no melhor dos casos, proibitiva.

Para \citeauthoronline{smartcontract}, contratos são a base para uma economia livre de mercado, e que por isso, é necessário que os mecanismos do mundo sejam construídos de madeira a criar contratos:

a. robustos contra vandalismo ingênuo;
b. robustos contra violações sofisticadas\footnote{É importante salientar, que um contrato inteligente não se propõe a lidar com um terceiro tipo de ataque, o vandalismo sofisticado, caracterizado como sendo o uso extensivo e desproporcional de força ou poder, tais como ataques militares efetuados por terceiros\cite{smartcontract}. Esse tipo de ataque é raramente utilizado nas relações de livre mercado, e quase invariavelmente são oriundos de uma alocação de recursos obtidos de forma coercitiva por governos ou entidades autoritárias.}.

\citeauthoronline{smartcontract} classifica a forma de seguração contratual em:

- reativa: ação tomada após a quebra de um contrato, como medidas físicas tomadas por agências de segurança, tais quais, prisão e confiscação de propriedade;
- proativa: ação tomada de forma a coibir a quebra de um contrato, como caixas fortes com mecanismos de autenticação que impeçam o acesso não autorizado a um bem de valor.

Nessas classificações, um sistema judicial estatal, bem como a polícia e empresas de seguros, são considerados uma segurança contratual reativa, que embora sejam efetivas, são onerosas e burocráticas, aumentando o custo de transação, o que produz produtos ou serviços mais caros. E por esse motivo, contratos inteligentes, que incorporam em si mecanismos proativos de segurança, oferecem um menor custo de transação e uma segurança suficiente para coibir a violação de contratos.

Com o surgimento do *Bitcoin*, criou-se a possibilidade de incorporar contratos inteligentes em *blockchain*, sendo a moeda *Bitcoin*, uma forma de contrato inteligente incorporado em *software*, já que a moeda em si não possui nenhum componente de segurança reativa, confiando completamente no poder da criptografia e do algorítmo de consenso para garantir que as regras, ou cláusulas, que definem o que é uma transação válida não sejam quebradas, e que qualquer tentativa de fraude da blockchain seja punida com a perda de tempo e recursos computacionais, e consequentemente recursos energéticos.

E foi o surgimento da *Ethereum* que culminou na adoção e propagação de contratos inteligentes em diferentes contexto. A *Ethereum*, uma criptomoeda que implementa uma *blockchain* que suporta o uso de uma linguagem *Turing-completa*\footnote{\emph{Turing-completo} é a denominação dada a sistemas de regras capazes de simular um computador primitivo, ou seja, permitir teóricamente, sem levar em consideração capacidade de memória e de processamento, a resolução de qualquer problema computacional, o que no contexto de linguagens de programação, significa ter suporte a estruturas condicionais e de repetição \cite{ethereum}.} foi concebida para permitir a criação de aplicações descentralizadas que fosse além do contexto financeiro \cite{ethereum}.

O desenvolvimento de aplicações descentralizadas permitiu o surgimento de um novo modelo organizacional, o DAO (*Decentralized Autonomous Organization* - Organização Autônoma descentralizada), em que todas as regras de funcionamento da empresa, inclusive divisão de lucros e como é feito decisões de negócio da empresa, são codificadas em contratos inteligentes utilizando *blockchain*. Isso garante que crie-se empresas com regras claras, imutáveis, e que haja a garantia  de como a empresa vai funcionar durante toda sua existência.

Embora, aplicações descentralizadas sejam interessantes em contextos que envolvem a desconfiança em agentes centrais, é importante salientar que existe problemas intrínsecos relacionados ao uso de *blockchain* na construção de aplicações. Como \citeauthor{safesmart} constataram, o desenvolvimento de contratos inteligentes embora se assemelhe ao desenvolvimento tradicional, possui preocupações muito maiores quanto a segurança, além de não ser nem um pouco trivial.

De forma simplista, um código de contrato inteligente é invocado sempre que recebe uma mensagem, podendo haver vários pontos de entrada, sendo cada ponto de entrada uma função do código a ser executada. Ou seja, uma mensagem recebida é como a chamada de uma função, que deve retornar um resultado para quem enviou a mensagem após a mensagem ser processada pela função do contrato (fig. \ref{fig:ethcode}).

\begin{figure}[htbp]
  \caption{\label{fig:ethcode}Exemplo de contrato inteligente implementado na linguagem \emph{Serpent}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/ethcode.png}
  \end{center}
  \legend{Fonte: \citeauthor{safesmart}.}
\end{figure}

Em última análise, criar um contrato inteligente é um processo meticuloso e que envolve codificar máquinas de estado muitas vezes complexas, em que qualquer omissão de um estado de transição ou negligẽncia em checar o estado atual, pode causar problemas drásticos \cite{safesmart}, principalmente por serem, a príncipio, imutáveis e envolverem contextos atrelados a manipulação de recursos financeiros.

O desenvolvimento de contratos inteligentes, assemelha-se então, muito mais ao desenvolvimento de *software* embarcado (em que o *recall*\footnote{\emph{recall} (devolução) é o termo usado para quando um lote inteiro de uma linha de produto já vendida apresenta defeitos de fabricação e a fabricante convida seus clientes a devolverem o produto seja para reparação do problema ou para troca, sem gerar custos para o cliente por esse serviço.} é indesejádo e oneroso financeiramente), do que *software* evolutivo e incremental (em que a atualização do *software* é facilmente realizada e incentivada).

Outra preocupação recorrente em relação ao desenvolvimento de aplicações descentralizadas, é a utilização da tecnologia *Blockchain*, que exige que um nó completamente engajado no processo de criação de novos blocos,  deve processar cada transação e manter uma cópia completa do estado atual da *Blockchain*. Embora isso garanta questões de segurança, neutralidade política e tolerância a falhas, isso tem um alto custo de escalabilidade. Inclusive, cada novo nó que entra na rede, ao invés de deixá-la mais performática, acaba por tornar a rede mais fraca, pelo fato de a latência entre nós crescer de forma logarítmica a cada nó adicionado \cite{scale}.

Devido ao aumento do número de transações, e do tamanho total da *Blockchain*, a *Prova de Trabalho* acaba por obrigar que os nós tenham cada vez mais capacidade de processamento e de armazenamento, o que pode culminar em um processo de centralização, em que apenas nós com maior infra-estrutura conseguem participar da rede. Para exemplificar, \citeauthoronline{scale} relatou que em \citeyear{scale}, a *Blockchain* do *Bitcoin* transacionou 7 transações por segundo, tendo na época, um limite teórico de 4000 transações por segundo; e a *Blockchain* da *Ethereum* chegou a transacionar 15 transações por segundo.

Embora novas tecnologias e abordagens tenham sido implementadas no protocolo *Bitcoin*, assim como de outras criptomoedas, como a *Ethereum*, e o potencial de escalabilidade esteja aumentando ano a ano, é inegável que esse volume de transações por segundo é irrisório comparado com aplicações centralizadas e distribuídas, que conseguem lidar com milhares de transações por segundo, e que possuem capacidade de escalonamento de acordo com a demanda pelo serviço.

Para tentar solucionar o problema de construção de aplicações descentralizadas que sejam escaláveis, \citeauthoronline{holo} propuseram uma arquitetura denomina *Holochain* que possui como principais características:

1. permitir aplicações descentralizadas completamente funcionais (muito mais sofisticas que meros contratos inteligentes), e capaz de servir usuários tradicionais da *internet*;
2. prover infraestrutura criptográfica massivamente escalável necessária para hospedar e gerenciar aplicações com enorme volume de uso.

A *Holochain* provê a garantia de integridade de dados para aplicações *peer-to-peer* sem utilizar algorítmos de consenso, o que economiza poder de processamento, sem abandonar a característica de imutabilidade. \citeauthor{holo} denomina essa abordagem como *centrada no agente* e destaca que o custo computacional de gerenciamento de consenso requer uma quantidade desnecessária de processamento de dados que carrega limitações de escalabilidade inerentes a abordagem.

A *Holochain* foi pensada para ter um modo de operação similar ao *git*, em que cada nó não precisa estar sincronizado com outros nós, e que cada nó pode ter  sua própria *blockchain* interna, independente das demais. Apenas quando os nós se comunicam, deve haver a validação das informações trocadas e a resolução de conflitos entre os nós \cite{holo2}. Nesse sentido, para \citeauthoronline{holo2} a *Blockchain* possui uma estrutura *centrada no dado*, em contraste com a abordagem *centrada no agente*, adotada pela *Holochain*.

A abordagem *centrada no agente* abstrai muito mais o mundo real, ao reconhecer que cada nó tem uma perspectiva, interesse e tempo de interação diferente de outro nó da rede, não havendo uma memória única e idêntica compartilhada por todos os nós. Isso permite que haja o paralelismo no tratamento dos dados por cada nó, o que em última instância permite a escalabilidade da rede.

De forma resumida, uma aplicação *Holochain* consiste de uma rede de agentes mantendo uma única *blockchain* que serve como fonte de suas transações, pareada com um espaço compartilhado que implementa uma *DHT* (*Distributed Hash Table* - tabela *hash* distribuída) validadora, *sharded*\footnote{Um \emph{shard} (fragmento)  de banco de dados é uma partição horizontal de dados que ocorre com a criação de diversas instâncias fisicamente separadas e distribuídas do banco de dados. Um particionamento horizontal é a separação das informações de um banco de dados em linhas, permitindo que cada instância tenha apenas um subconjunto de todos os elementos guardados na base de dados \cite{shard}.}(fragmentada), monotônica\footnote{\emph{dedução monotônica} é a propriedade que vários sistemas lógicos possuem de a partir de uma hipótese, poder ser livremente adicionadas novas suposições, sem que haja uma violação da hipótese original. De forma simplificada, significa dizer que a incorporação de um novo conhecimento não pode reduzir o conjunto do que é conhecido}, em que vários nós garantam que os dados armazenados na *DHT* obedeceram as regras de validação, além de fornecer a informação sobre a origem do dado \cite{holo2}.

Incluir um novo registro na *DHT* envolve encontrar um nó responsável por cuidar daquele registro, que ao receber o dado do estado de transição, informa aos seus nós vizinhos. Cada um dos nós vizinhos ao receber essa informação do nó responsável pelo dado, deve validá-lo utilizando a lógica da aplicação. Assim, há diversas cópias, igualmente validadas e como a rede é criada para ter os dados uniformemente distribuídos, há a garantia de que o dado seja rapidamente encontrado\footnote{A \meph{DHT} utilizada pela \emph{Holochain} é baseada na \emph{Kademlia}\cite{kademlia}, e o processo de encontrar um nó vizinho é exemplificado pela figura \ref{fig:kademlia}, em que um nó consegue encontrar qualquer outro nó, perguntando para os nós que conhece, até encontrar o nó desejado.}, mesmo quando o nó original do dado estiver indisponível \cite{holo2}.

\begin{figure}[htbp]
  \caption{\label{fig:kademlia}Processo de procura de um nó na \emph{DHT Kademlia}.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/kademlia.png}
  \end{center}
  \legend{Fonte: \citeauthor{kademlia}.}
\end{figure}

Diferentemente da aplicações descentralizadas construídas utilizando tecnologia *blockchain*, a *Holochain* não sofre de problema de escalabilidade, se tornando cada vez mais eficiente a medida que o número de nós aumenta, já que a rede divide o trabalho entre os nós. Por conta disso, enquanto a rede *Ethereum* necessita de melhorias para resolver problemas de escalabilidade, a Holochain já está pronta para o desenvolvimento de aplicações descentralizadas, o que a torna uma excelente opção para uma plataforma de comércio eletrônico que pretende ser utilizada de forma extensiva.

\begin{table}[htbp]
\caption{\label{tab:holo}Comparativo entre \emph{Blockchain} e \emph{Holochain}.}
\begin{tabular}{m{0.2\linewidth} | m{0.4\linewidth} | m{0.4\linewidth}}
\toprule
                                  & \textbf{Blockchain}                                                                                                                                            & \textbf{Holochain}                                                                                                                                                                                                   \\ \hline
\textbf{Abordagem}                & Centrado em dado, um único conjunto de dados global e uma realidade compartilhada por todos os nós                                                             & Centrado em agente, permite os nós atuarem independentemente ou em  estreita colaboração, e então compartilhar realidades independentes e evolutivas sobre os dados e que chegam a um acordo ao longo do tempo       \\ \hline
\textbf{Consumo Energético}       & Bitcoin consome mais que 0,1\% de toda energia elétrica para prover menos de 0,0001\% do processamento financeiro mundial                                      & Como nenhuma mineração é necessária, não é necessário possuir  uma CPU ou GPU especializada, tornando factível  rodar os nós da rede em computadores com baixo poder de   processamento, ou mesmo em celulares       \\ \hline
\textbf{Volume de Transações}     & Neo, uma blockchain bastante performática, processa mais de 1000 transações por segundo. Bitcoin e Ethereum processam menos de uma centena por segundo         & Expectativa de ultrapasse o número de transações suportado  pela rede VISA, que tem um máximo de 56000  transações por segundo}                                                                                      \\ \hline
\textbf{Escalabilidade}           & Mesmo desconsiderando a Prova de Trabalho, há sérios  problemas de limite de escalabilidade pelo fato  de requerer a sincronia entre muitos nós da rede        & Utilizando uma DHT compartilhada, o volume de transação  carregada por nó se torna menor a medida que a rede cresce                                                                                                  \\ \hline
\textbf{Plataforma}               & Atualmente só pode funcionar de forma efetiva em computadores especializados para mineração                                                                    & Pode ser executado em Raspberry Pi ou em um smartphone                                                                                                                                                               \\ \hline
\textbf{Eficiência Computacional} & O(\(n \times m\)) para validar transações                                                                                                                      & \(O(\frac{n}{m \times log m})\) para validar transações                                                                                                                                                              \\ \hline
\textbf{Efeito de consenso}       & Algorítmos de consenso centralizam o poder e a  Prova de Trabalho resulta em um crescimento computacional exorbitante  para um conjunto de dados finito        & Não possui mineração nem consenso. Não possui vulnerabilidade  ao ataque da maioria. Apenas é necessário confiar  no código que roda em seu nó e validar o histórico dos  nós com que se comunica
\end{tabular}
\legend{Fonte: \citeauthor{holo3}}
\end{table}

# Proposta

Neste capítulo será apresentado detalhes da proposta de plataforma de comércio eletrônico descentralizada, cujo objetivo é oferecer um ambiente de livre comércio que não dependa de um agente central e que possa ser utilizado globalmente. Para a solução proposta serão apresentados os requísitos de alto nível da solução, bem como um cronograma de execução do projeto.

## Visão do Projeto

O projeto trata-se de uma plataforma de comércio  eletrônica onde poderão ser ofertados produtos ou serviços sem que haja intermediários entre ofertante e pagador e se baseará em um sistema de reputação para qualificar os usuários e coibir maus usuários. Por se tratar de uma plataforma baseada no livre mercado, os mecanismos de reputação de usuário deixarão claro os riscos envolvidos em cada transação, bem como recomendações, mas jamais se sobreporá a vontade dos usuários em relação a quem eles desejam transacionar, baseando-se nos princípios de livre-associação e escolha, nas liberdades indivíduais, e na responsabilidade de cada indivíduo quanto as suas ações.

Toda a plataforma será disponibilizada livre de direitos autorais ou propriedade intelectual, com código livre e aberto, sendo desenvolvida com tecnologias *peer-to-peer* de forma a não possuir um ponto único de falha, e podendo ser operada enquanto houver nós conectados na rede, garantindo assim que seja uma plataforma descentralizada e livre para ser aperfeiçoada.

Embora a plataforma tenha o objetivo de ser livre, aberta, distribuída, e descentralizada, a solução desenvolvida pelo autor contará com um sistema de comissão em cada transação, de forma a contribuir com o desenvolvimento do projeto. Porém, é importante ressaltar, que por ser um código livre e aberto, nada impede que seja utilizado uma versão da plataforma que não possua essa comissão, porém, o autor acredita que a livre concorrência de ideias é benéfica e que uma versão original tem vantagem sobre versões não-oficiais, sendo que a concorrência de versões serve tanto como incentivo para evolução da plataforma como forma de garantir que a ideia do projeto não seja corrompida por uma visão centralizada que difira da visão da comunidade.

Para possibilitar o uso da plataforma por qualquer usuário, localizado em qualquer país do mundo, todos os produtos ou serviços da plataforma serão precificados em Bitcoin ou outras criptomoedas, e haverá um sistema de depósito de segurança para coibir fraudes, em que uma porcentagem do valor do produto ou serviço ficará em custódia até que o processo de pagamento e recebimento do produto ou serviço seja validado por ambas as partes.

A plataforma será operada utilizando contratos inteligentes, de forma a garantir que todo o processo de cadastramento de usuário, depósito de segurança, oferta e pagamento de produto ou serviço, reputação dos usuários, e todas as regras de negócios, serão implementadas em forma de contrato inteligente, a fim de prover uma forma automatizada, segura, auditável e que não dependa de terceiros para funcionar.

A príncipio a plataforma será desenvolvida para ser acessada por qualquer dispositivo conectado a *internet* que possua um navegador moderno, porém, o intuito é que sejam disponibilizadas versões para dispositivos móveis, que utilizem os sistemas operacionais iOS e Android.

### Diferença em Relação a Concorrentes

As plataformas de comércio eletrônico atuais movimentam um grande volume de dinheiro (fig. \ref{fig:revenue}), porém, a limitação de operarem apenas com dinheiro fiduciário, além das restrições que são impostas por agentes centrais, impedem que essas plataformas sejam utilizadas em ambientes, que com menos regulação, se beneficiariam de produtos mais baratos e uma maior variedade de oferta. Além disso, são plataformas que só conseguem operar em um país a partir do momento em que cumprem com todas as obrigações legais e fiscais do país.

\begin{figure}[htbp]
  \caption{\label{fig:revenue}Aumento da receita de empresas de comércio eletrônico em 2017.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/revenue.png}
  \end{center}
  \legend{Fonte: \citeauthor{revenue}.}
\end{figure}

Na África do Sul, há pelo menos duas vezes mais celulares do que linhas de telefone fixo, e as transações bancárias são comumente realizadas por meio de celulares ao invés de tradicionáis máquinas de auto-atendimento \cite{africa}. Isso retrata uma realidade diferente da que estamos acostumados, e como \citeauthor{africa-btc} traz em vários relatos e entrevistas, a utilização de criptomoedas e tecnologias *blockchain* tem crescido e se popularizado em diversos países africanos.

Não se pode deduzir uma relação de causa e efeito, mas pode-se tentar inferir que países que durante décadas passaram por instabilidades políticas e tiveram pouco desenvolvimento tecnológico, agora estão chegando na era da tecnologia muito mais dispostos a adotarem tecnologias consideradas disruptivas, e muito mais preocupados em adotarem sistemas menos centralizados, já que são comunidades com um forte senso de colaboração e que geralmente veem com desconfiança figuras centralizadores de poder.

Nesses cenários, a não existência de intermediários e a utilização de tecnologias que permitam a fácil interação entre membros da comunidade e de forma não burocrática, é um forte atrativo e diferencial que plataformas centralizadoras não têm interesse em prover.

A população da Venezuela, que segundo o \citeauthor{fmireport2019} teve uma inflação de mais de 929.000% (novecentos e vinte e nove mil porcento) em 2018 e uma inflação projetada para alcançar 10.000.000% (dez milhões porcento) no ano de 2019, enxerga a adoção de uma moeda sem fronteiras e que não possui um agente central de forma muito mais natural do que a população brasileira, que ainda conta com uma moeda relativamente estável.

Já é comum que os venezuelano, por não confiarem mais na moeda de seu país, convertam o dinheiro que ganham em moeda local para criptomoedas, e que as usem como reserva de valor, trocando-as quando necessário \cite{venezuela}. Já é possível viajar para a Venezuela, e passar vários dias lá, pagando desde a passagem do avião até hospedagem, comida, e transporte utilizando criptomoedas, como relatado em primeira mão pelo documentário produzido por \citeauthor{doc}.

Tudo isso demonstra que há a oportunidade de oferecer uma plataforma que seja acessível para esses mercados e que respeite as características únicas de cada país, em que os próprios indivíduos sejam autônomos ao decidirem com quem comercializam, como comercializam, e utilizando moedas que não possam ser manipuladas por governos locais. Há tanto uma oportunidade tecnológica de prover uma melhoria nas relações de comércio, como uma oportunidade de oferecer uma alternativa a meios tradicionais de comércio.

Não obstante, a crescente popularização de plataformas como OLX, Mercado Livre, eBay, AliExpress, dentre outras, mostra que há uma forte aceitação dos consumidores em comercializarem produtos sem a utilização de intermediários, sendo a plataforma eletrônica apenas um facilitador que conecta compradores com vendedores. Mesmo assim, essas plataformas ignoram a utilização de criptomoedas, e o seu potencial em prover uma forma global de pagamento.

Outras plataformas que implementam conceitos de *dApps*, além de raras, sofrem com a ambição de criarem um sistema de governança restritivo, que geralmente inclui a criação de um novo *token*, com intenção de financiar seus custos operacionais e potencialmente enriquecer os fundadores. Embora essa estratégia pareça vantajosa, ela possui um contrapeso nocivo, em que o sucesso da plataforma fica atrelado a adoção de um *token* recém criado que concorre com criptomoedas consolidadas, o que geralmente culmina na falência do negócio e desconfiança no ecossistema dos aplicativos descentralizados.

Por isso, o presente projeto  mostra-se com o diferencial de prover uma plataforma de fato descentralização, e que se propõe a utilizar criptomoedas já consolidadas, bem como incorporar tecnologias que se mostrem viáveis, sem a ambição de criar modelos de negócios que jamais foram validados.

## Escopo do Projeto

Devido a limitação de tempo para desenvolver o projeto, apenas um conjunto essencial do projeto será desenvolvido inicialmente. O escopo aqui delimitado será entendido como uma prova de conceito para determinar a viabilidade técnica da solução, bem como para validar a ideia e verificar se há demanda pela solução.

O prazo estipulado de desenvolvimento da prova de conceito compreende a um período de 4 meses. Para determinar o produto mínimo a ser entregue neste prazo, levou-se em conta o diferencial dessa solução, tentando extrair o mínimo viável para ínicio de testes com usuários reais.

As principais funcionalidades que a plataforma deve prover na prova de conceito são:

1. Gerenciamento da rede *peer-to-peer*: conexão e comunicação entre nós;
1. Gerenciamento de usuário: cadastro, login, perfil;
1. Gerenciamento de serviço digital: criar, editar, exibir, avaliar;
1. Gerenciamento de pagamento: prover métodos de pagamento baseado em Bitcoin, e possíveis outras moedas;
1. Exibição e filtro de serviços digitais: exibição de lista de serviços com filtros para categoria, proximidade, faixa de preço, e pesquisa por título de serviço e autor.

É importante salientar que as funcionalidades acima descritas serão implementadas utilizando contratos inteligentes e tecnologias *peer-to-peer*.

# Discussões Finais

O presente trabalho apresentou a fundamentação por trás do livre mercado e porque ele é importante nas relações sociais; como as criptomoedas surgiram e como podem contribuir para a criação de um livre mercado; qual a tecnologia por trás das criptomoedas, a *Blockchain*, e como a descentralização trazida por ela possibilitou o surgimento de um novo tipo de aplicação, as aplicações descentralizadas.

A partir da contextualização do que é uma aplicação descentralizada, foi explicado o que é a rede *Ethereum* e como ela pode ser utilizada para a criação de contratos inteligentes; quais são suas desvantagens em termo de performance; e como a *Holochain* surgiu como proposta de rede descentralizada com capacidade de ser utilizada em alta escala na construção de aplicações robustas.

De posse desse conhecimento, foi explicado as razões para a proposta de uma plataforma descentralizada baseada nas tecnologias estudadas, como essa solução se difere das atuais soluções existentes, e quais funcionalidades foram planejadas para serem entregues nos próximos 4 meses de desenvolvimento do projeto.

Com isso, alcançou-se o objetivo final do trabalho de descrever como as tecnologias descentralizadas podem ser utilizadas para construir uma plataforma de livre comércio livre de agentes centrais.

Como objetivo para o próximo trabalho, planeja-se especificar os requisitos funcionais e não-funcionais da prova de conceito, utilizando-se da engenharia de requisitos; desenvolver a prova-de-conceito utilizando a tecnologia Holochain, e permitindo a utilização de criptomoedas como meio de transação dentro da plataforma; verificar a performance da prova-de-conceito; e fazer um relato sobre as peculiaridades de se desenvolver uma plataforma descentralizada, comparando com o desenvolvimento de plataformas tradicionais de *software* e como os métodos e ferramentas do campo da engenharia de *software* se aderem a esse tipo de desenvolvimento.

## Cronograma

A figura \ref{fig:planning} mostra o planejamento inicial da prova de conceito. Assim, o projeto tem previsão de ínicio  para o dia 22 de julho de 2019 e previsão de término para 4 de dezembro de 2019, sendo particionado em 7 sprints de 14 dias cada.

\begin{figure}[htbp]
  \caption{\label{fig:planning}Cronograma da prova de conceito.}
  \begin{center}
  \includegraphics[width=1.0\textwidth]{imagens/planning.png}
  \end{center}
  \legend{Fonte: Autor.}
\end{figure}
